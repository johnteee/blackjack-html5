<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: hand.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: hand.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
 * A module representing a hand
 * @module Hand
 */
define('Hand', ['Cards'], function (Cards) {

    /**
     * @alias module:Hand
     * @param {object} ctx Canvas context
     * @param {array} pos Card position on canvas [px, px]
     */
    function Hand (ctx, pos) {

        if (!(this instanceof Hand)) {
            throw new TypeError('Hand constructor cannot be called as a function.');
        }

        /**
         * A collection of cards
         * @type {array}
         */
        this.cards = [];

        /**
         * @type {object}
         */
        this.ctx = ctx;

        /**
         * @type {array}
         */
        this.pos = pos;

        /**
         * Visibility of hand value
         * @type {boolean}
         */
        this.valuePublic = false;
    }

    /**
     * Hand prototype
     */
    Hand.prototype = {

        /**
         * Add a card to the hand
         * @param {Card} card
         */
        addCard: function (card) {
            this.cards.push(card);
        },

        /**
         * Get the total value of the cards in hand
         * @returns {number} value
         */
        getValue: function () {
            var value = 0;

            this.cards.forEach(function(card) {
                value += Cards.values[card.rank];

                if (card.rank === 'A' &amp;&amp; value &lt;= 11) {
                    value += 10;
                }
            });

            return value;
        },

        /**
         * Draw all cards in hand on the canvas
         */
        draw: function () {
            var ctx = this.ctx;
            var pos = this.pos;
            this.cards.forEach(function(card, index) {
                card.draw(ctx,
                    [
                        pos[0] + index * (Cards.size[0] + 5),
                        pos[1]
                    ]
                );
            });

            this.drawValue();
        },

        /**
         * Draw hand value on the canvas
         */
        drawValue: function () {
            if (this.valuePublic === true) {
                var ctx = this.ctx;
                var pos = this.pos;
                var centerX = 60;
                var centerY = pos[1] + Cards.size[1] / 2;
                var text = this.getValue();

                ctx.beginPath();
                ctx.arc(centerX, centerY, 20, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'orange';
                ctx.fill();
                ctx.lineWidth = 2;
                ctx.strokeStyle = 'black';
                ctx.stroke();

                ctx.font = '16px Arial';
                ctx.fillStyle = 'black';
                ctx.fillText(
                    text,
                    centerX - ctx.measureText(text).width / 2,
                    centerY + 6
                );
            }
        }
    };

    return Hand;
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Blackjack.html">Blackjack</a></li><li><a href="module-Button.html">Button</a></li><li><a href="module-Card.html">Card</a></li><li><a href="module-Cards.html">Cards</a></li><li><a href="module-Deck.html">Deck</a></li><li><a href="module-Hand.html">Hand</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta2</a> on Wed Mar 18 2015 10:14:33 GMT+0000 (GMT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
